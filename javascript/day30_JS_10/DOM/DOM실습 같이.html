<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- <link rel="stylesheet" href="reset.css"> -->
  <style>
    /* 직접 셀렉트 박스 만들기 */
    h2 {
      margin: 30px;
    }

    .cont-select {
      position: relative;
      width: 200px;
    }

    .btn-select {
      width: 100%;
      padding: 13px 14px;
      color: #000;
      font-size: 12px;
      line-height: 14px;
      text-align: left;
      border: 1px solid #C4C4C4;
      box-sizing: border-box;
      border-radius: 10px;
      cursor: pointer;
      background: url("#none") right 13px center no-repeat;

      /* 말줄임 추가 */
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .btn-select:focus {
      outline: 3px solid #F8E4FF;
    }

    .list-member {
      display: none;
      width: 100%;
      overflow: hidden;
      position: absolute;
      left: 0;
      top: 51px;
      background: #FFF;
      border: 1px solid #C4C4C4;
      box-shadow: 4px 4px 14px rgba(0, 0, 0, 0.15);
      border-radius: 10px;
      list-style: none;
      padding: 0;
    }

    .btn-select.on {
      background: url("images/icon-Triangle-up.png") right 13px center no-repeat;

    }

    .btn-select.on+.list-member {
      display: block;
    }

    .list-member li {
      height: 40px;
      padding: 5px 18px;
    }

    .list-member li button {
      display: block;
      height: 30px;
      width: 100%;
      border: none;
      background-color: #fff;
      border-radius: 8px;
      cursor: pointer;

      /* 말줄임 추가 */
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .list-member.on + li {
      display: block;
    }

    .list-member li button:focus,
    .list-member li button:hover {
      background-color: #F8E4FF;
    }

    .btn-select.on+.list-member {
      display: block;
    }
  </style>
</head>

<body>

  <h2>셀렉트 박스 만들기</h2>
  <article class="cont-select">
    <button class="btn-select">나의 최애 프로그래밍 언어</button>
    <ul class="list-member">
      <!-- <li><button type="button">Python</button></li>
            <li><button type="button">Java</button></li>
            <li><button type="button">JavaScript</button></li>
            <li><button type="button">C#</button></li>
            <li><button type="button">C/C++</button></li> -->
    </ul>
  </article>

  <script>
    const btn = document.querySelector('.btn-select');
    const list = document.querySelector('.list-member');
    const arrLang = ["Python","Java","JavaScript","C#","C/C++"]; // 버튼에 들어간 텍스트를 배열로 만든다.

    arrLang.forEach((item) => {
       const li = document.createElement('li');
       const btn = document.createElement('button');
       btn.setAttribute('type', 'button'); // 타입 지정.
       btn.textContent = item;
       li.appendChild(btn);  // li 의 자식으로 btn 이 들어간다.
       list.appendChild(li); // list 의 자식으로 li 가 들어간다.
    // list.appendChild(li).appendChild(btn)  메서드 체이닝으로 list > li > button 를 담는다.
    })
    
    btn.addEventListener('click', () => {
        btn.classList.toggle('on');  // 버튼 클릭시 on 클래스가 추가 제거 되게 한다.
    });

    list.addEventListener('click', (event) => { //event 안에는 캡쳐링과 버블링을 거쳐간 모든 정보가 들어있다. 

        if(event.target.nodeName === "BUTTON"){
          btn.textContent = event.target.textContent;// 리스트의 텍스트를 클릭하면 버튼의 텍스트가 리스트에서 클릭한 텍스트로 변견된다.
          btn.classList.remove('on');  // 리스트의 텍스트를 클릭하면 클래스  btn 의 on 클래스가 삭제된다. 
        }
    });


  </script>
</body>

</html>